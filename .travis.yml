language: java
jdk:
- oraclejdk8
install: true
script:
- gradle zipMap
before_deploy:
- git config --global user.email "tripleabuilderbot@gmail.com" 
- git config --global user.name "tripleabuilderbot"
- export MAP_TAGGED_VERSION="$MAP_VERSION.$TRAVIS_BUILD_NUMBER"
- git tag $MAP_TAGGED_VERSION -a -m "$MAP_TAGGED_VERSION"
- git push -q https://$GITHUB_PERSONAL_ACCESS_TOKEN_FOR_TRAVIS@github.com/triplea-maps/$REPO_NAME --tags
deploy:
  provider: releases
  api_key:
    secure: Dn4JrKMvj85MqLMQkmdBmGm83utag4Ik7KQiej5DymSGG4ESPgyEkK+eonoiObk3zoNJsLXrTz3NM+PFYkdRCwR2Lm9iZ4G9ERPUVm0ScBBdUkw219j4H8Ym/IGxEzKznzoPmViwHB/jN/QEnd67fsRuATPEBF6B4vuxgthAh4Vwy3lWENJN2hgX6dkRB4Z/Ve842K9b2pFTu0FumHuEeo7joLZi/rblV9stUdME/IzBQ4G7VqGPn8yyK3x6ZIj6grI+yEooSIlhi3TRNKecbct57eo9AoW6uCD8m+ChPYlh2jqFM0l5g5f1D1FZfpnM9uXdvtu1JF6DOGyGi7ZWOd37Kz83oWznxWfLxk+Lb7jknKmypX4zlRinzhoctRGSgrCRz0bMEedsiS+1wTJaCluOyAFlJGskRlA2pORulWclU3QZC2OxpZFldwXFaE3lWxABZMam2h1RNWUG+HNnhzsyecy1qPqvM4J0AKpJQFMbVAbaK3w4JQ05Gr8s0vVYw5e+rChjDpPydoS1sQ+dsp3kbzG/iI4/9qLFE1UHUA65jRVfoDlCDZ2RiRRmjabKw55xVy34A7kj54JuJYJzKKx4iOF+8j+StxoagbgeA4LC4s0nVTNfJOSV3ELmeH7H5f3FVkPsEyyZ/J801b/HMvMZbaO6Mj1ms3mEZ2l0vts=
  file: "$REPO_NAME.zip"
  skip_cleanup: true
  prerelease: true
  on:
    tags: false
    all_branches: true
